language: java
install: true

os: linux
dist: trusty
jdk: oraclejdk8

env:
  - PLATFORM_VERSION=192
#  - PLATFORM_VERSION=193

# https://guides.gradle.org/executing-gradle-builds-on-travisci/
script:
  - ./gradlew buildPlugin -PplatformVersion=$PLATFORM_VERSION

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/

deploy:
  provider: releases
  api_key: "QkTc5cpfw6YffWQj8CpIsThaRFnaZ2w8OCl3nuo3WnvbMIm3ODY7/P3lAGU5N3Jl2rLnd/azbLVGPK3rne//nvG0oJ2MO5x2oEOumO89C2PZYCv9i9AgwNfpidz4qC61lsSqi1+n7a2sBXIvxIcYjrF8OP4XcN5dktfurhOK9Q3U3UiiGaTz/5LpDACMAbkjJXM1aXTMcbGcK9RyVfkoukI5TUL+u3oKyQnk3Utb4u7S1U9S2LoXibkzL2RRC9kA9sT0xZPO65smmf2nv8KtgO+/tdowFcIY+XEVrrh/ORuYeXiHPnKYSw2aaGSb8cD9ieBZ7ZiOTjSzU3Aii8E1oEREHygebxtbC8WT9tZwWGG51z12FvB7l0Wx69YLFrVtSDNC3SUFcf35rrjOAvFQaQMF72mD8zHsqZUoxNmETbfe/I4oWMKBEx8HpX/WVI3BHufm7kV8X9+gbJ8VVv9q69+72j2J/taMeq7lVTOJhBG3nchhBL7uJQVH43O3AqHV7O8AxdDOmtv6Db/9FxBDQDUpnVKqJ5pZpDsDQfMXMf5S9i+zNqpQyVsl8/TiHa36wCzjbJQkUjCVkOkRvtZswFNKBz2OQfJ/FdeMpHB/mrFA59RKIcL3uMXfQ8ypXrqID0Ow1AdklMHnqzG4/zdfVPWh9535M2Dyb9I6AX6Jjqc="
  draft: true
  file_glob: true
  file: build/libs/*.jar
  skip_cleanup: true
  on:
    branch: travis